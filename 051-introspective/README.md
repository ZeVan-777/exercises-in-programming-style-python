# 内省风格

## 约束

- 利用不同形式抽象分解较大的问题
- 抽象可以获取自身以及其他抽象的信息，但不能改变这些信息

## 注解

计算反射首先要求程序能够获取自身信息 —— **内省**。示例程序使用少量内省阐述其主要概念：

``` python
def read_stop_words():
    """ 只能被 extract_words 函数正常调用 """
    if inspect.stack()[1][3] != 'extract_words':
        return None
    # ...
```

通过查询调用栈（`inspect.stack()`），然后读取前一帧[1]，再检查该调用帧的函数名。

其他内省运行结构`locals()`，通过迭代该符号表返回当前函数可用局部变量的字典。

在合适的场景下，小心地**访问程序的内部结构获取额外信息**可以以较低的复杂度实现强大的功能。然而，使用内省使程序变得**不直观**，有时甚至难以理解。
